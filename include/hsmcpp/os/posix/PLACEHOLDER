TODO: pthread based implementation (if ever needed)